!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(window,(function(){return function(e){function t(t){for(var a,s,c=t[0],i=t[1],l=t[2],f=0,m=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={3:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;return o.push([22,0]),n()}({13:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=u(e);return a=this,!(r=t?(n=u(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==s(r)&&"function"!=typeof r?l(a):r}}(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=n.call(this,e)).state={title:e.title,label:e.label,message:e.message},t.closeModal=t.closeModal.bind(l(t)),t}return e=f,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.title,label:e.label,message:e.message})}},{key:"closeModal",value:function(){$("#messageModal").modal("hide")}},{key:"render",value:function(){var e,t=this,n=[];return this.state.label&&(e=r.a.createElement("h5",null,this.state.label)),this.state.message&&this.state.message.forEach((function(e,t){n.push(r.a.createElement("li",{key:t},e))})),r.a.createElement("div",{className:"modal fade on-top",id:"messageModal",tabIndex:"-1",role:"dialog","aria-labelledby":"messageModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"messageModalLabel"},this.state.title),r.a.createElement("button",{type:"button",className:"close","aria-label":o.a.t("modal.close"),onClick:function(e){return t.closeModal(e,!1)}},r.a.createElement("span",{"aria-hidden":"true"},"Ã—"))),r.a.createElement("div",{className:"modal-body"},e,r.a.createElement("ul",null,n)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return t.closeModal(e,!1)}},o.a.t("modal.close"))))))}}])&&c(e.prototype,t),f}();t.a=f},2:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriberList={}}var t,n;return t=e,(n=[{key:"subscribe",value:function(e,t){this.subscriberList[e]=t}},{key:"sendMessage",value:function(e,t){if(Array.isArray(e)||(e=[e]),"broadcast"===e[0])this.subscriberList.forEach((function(e,n){e({type:"broadcast",message:t})}));else for(var n in this.subscriberList)0<=e.indexOf(n)&&this.subscriberList[n](t)}}])&&a(t.prototype,n),e}());t.a=r},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),s=n.n(o),c=n(1),i=n(10),l=n(11),u=n(3),f=n(2),m=n(4);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=y(e);return a=this,!(r=t?(n=y(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==p(r)&&"function"!=typeof r?g(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,userList:e.userList,currentUser:e.currentUser,client:e.client,newUser:e.newUser,newUserScheme:e.newUserScheme,canContinue:e.canContinue,showGrant:e.showGrant,schemeListRequired:e.schemeListRequired,bGrantTitle:e.showGrant?c.a.t("login.grant-auth-title"):c.a.t("login.grant-change-title"),bGrant:e.showGrant?c.a.t("login.grant-auth"):c.a.t("login.grant-change"),showGrantAsterisk:e.showGrantAsterisk,selectAccount:e.selectAccount,registration:e.registration,resetCredentials:e.resetCredentials,resetCredentialsShow:e.resetCredentialsShow},t.clickLogout=t.clickLogout.bind(g(t)),t.clickGrant=t.clickGrant.bind(g(t)),t.clickContinue=t.clickContinue.bind(g(t)),t.newUser=t.newUser.bind(g(t)),t.managerUsers=t.managerUsers.bind(g(t)),t.changeSessionScheme=t.changeSessionScheme.bind(g(t)),t.registerNewUser=t.registerNewUser.bind(g(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({userList:e.userList,currentUser:e.currentUser,client:e.client,config:e.config,showGrant:e.showGrant,newUser:e.newUser,newUserScheme:e.newUserScheme,canContinue:e.canContinue,schemeListRequired:e.schemeListRequired,bGrantTitle:e.showGrant?c.a.t("login.grant-auth-title"):c.a.t("login.grant-change-title"),bGrant:e.showGrant?c.a.t("login.grant-auth"):c.a.t("login.grant-change"),showGrantAsterisk:e.showGrantAsterisk,selectAccount:e.selectAccount,registration:e.registration,resetCredentials:e.resetCredentials,resetCredentialsShow:e.resetCredentialsShow})}},{key:"clickLogout",value:function(){u.a.glewlwydRequest("/auth/?username="+this.state.currentUser.username,"DELETE").then((function(){f.a.sendMessage("App",{type:"InitProfile"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-delete-session")}),f.a.sendMessage("App",{type:"InitProfile"})}))}},{key:"clickGrant",value:function(){f.a.sendMessage("App",{type:"ToggleGrant"})}},{key:"clickContinue",value:function(){this.state.config.params.callback_url&&(document.location.href=this.state.config.params.callback_url+(0<this.state.config.params.callback_url.indexOf("?")?"&g_continue":"?g_continue"))}},{key:"newUser",value:function(e,t){e.preventDefault(),t?u.a.glewlwydRequest("/auth/","POST",{username:t}).then((function(){f.a.sendMessage("App",{type:"InitProfile"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})})):f.a.sendMessage("App",{type:"NewUser"})}},{key:"registerNewUser",value:function(e,t){e.preventDefault(),document.location.href=this.state.config.ProfileUrl+"?register="+encodeURIComponent(t)+"&callback_url="+encodeURIComponent(document.location.href)}},{key:"resetCredentials",value:function(e){e.preventDefault(),f.a.sendMessage("App",{type:"ResetCredentials"})}},{key:"managerUsers",value:function(e){e.preventDefault(),f.a.sendMessage("App",{type:"SelectAccount"})}},{key:"changeSessionScheme",value:function(e,t){e.preventDefault(),f.a.sendMessage("App",{type:"newUserScheme",scheme:t})}},{key:"cancelResetCredentials",value:function(){f.a.sendMessage("App",{type:"NewUser"})}},{key:"render",value:function(){var e,t=this,n="",a="",o="",s=[];if(this.state.canContinue&&(a=r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.clickContinue,title:c.a.t("login.continue-title")},r.a.createElement("i",{className:"fas fa-play btn-icon"}),c.a.t("login.continue"))),this.state.showGrantAsterisk&&(n=r.a.createElement("small",null,r.a.createElement("i",{className:"fas fa-asterisk btn-icon-right"}))),this.state.client&&(o=r.a.createElement("div",null,r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:this.clickGrant,alt:this.state.bGrantTitle},r.a.createElement("i",{className:"fas fa-user-cog btn-icon"}),this.state.bGrant,n),r.a.createElement("div",{className:"dropdown-divider"}))),this.state.currentUser&&!this.state.selectAccount){this.state.registration.forEach((function(e,n){s.push(r.a.createElement("a",{key:n,className:"dropdown-item",href:"#",onClick:function(n){return t.registerNewUser(n,e.name)}},c.a.t(e.message)))}));var i=[];return this.state.userList&&this.state.userList.forEach((function(e,n){t.state.currentUser.username===e.username?i.push(r.a.createElement("a",{className:"dropdown-item active",href:"#",onClick:function(n){return t.newUser(n,e.username)},key:n,alt:e.name||e.username},e.name||e.username)):i.push(r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(n){return t.newUser(n,e.username)},key:n,alt:e.name||e.username},e.name||e.username))})),e=r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"selectNewUser","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-users btn-icon"}),c.a.t("login.login-another")),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"selectNewUser"},r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return t.newUser(e,!1)}},c.a.t("profile.menu-session-new")),r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return t.managerUsers(e)}},c.a.t("login.manage-users")),s,r.a.createElement("div",{className:"dropdown-divider"}),i)),r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"btn-group",role:"group"},a,r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.clickLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt btn-icon"}),c.a.t("login.logout"))),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"selectGrant","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-user-cog btn-icon"}),c.a.t("login.login-handle"),n),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"selectGrant"},o,r.a.createElement("a",{className:"dropdown-item",href:this.state.config.ProfileUrl||"",target:"_blank"},c.a.t("login.update-profile")))),e)))}if(this.state.newUser){this.state.config.register&&(this.state.resetCredentials.forEach((function(e,n){s.push(r.a.createElement("button",{key:n+t.state.config.register.length,type:"button",className:"btn btn-danger",onClick:function(n){return t.resetCredentials(n,e.name)}},c.a.t(e.message)))})),this.state.config.register.forEach((function(e,n){s.push(r.a.createElement("button",{key:n,type:"button",className:"btn btn-success",onClick:function(n){return t.registerNewUser(n,e.name)}},c.a.t(e.message)))})));var l=[];return this.state.config.sessionSchemes&&this.state.config.sessionSchemes.length?(this.state.newUserScheme?l.push(r.a.createElement("a",{key:0,className:"dropdown-item",href:"#",onClick:function(e){return t.changeSessionScheme(e,!1)},alt:c.a.t("login.password-title")},c.a.t("login.password-title"))):l.push(r.a.createElement("a",{key:0,className:"dropdown-item active",href:"#",onClick:function(e){return t.changeSessionScheme(e,!1)},alt:c.a.t("login.password-title")},c.a.t("login.password-title"))),l.push(r.a.createElement("div",{key:1,className:"dropdown-divider"})),this.state.config.sessionSchemes.forEach((function(e,n){!1!==e.show_nopassword_form&&(e.scheme_name===t.state.newUserScheme?l.push(r.a.createElement("a",{key:n+2,className:"dropdown-item active",href:"#",onClick:function(n){return t.changeSessionScheme(n,e.scheme_name)},alt:c.a.t(e.scheme_display_name)},c.a.t(e.scheme_display_name))):l.push(r.a.createElement("a",{key:n+2,className:"dropdown-item",href:"#",onClick:function(n){return t.changeSessionScheme(n,e.scheme_name)},alt:c.a.t(e.scheme_display_name)},c.a.t(e.scheme_display_name))))})),r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button",id:"selectScheme","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-user-lock btn-icon"}),c.a.t("login.login-choose-scheme")),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"selectScheme"},l)),s)):r.a.createElement("div",null,s)}return this.state.resetCredentialsShow?r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.cancelResetCredentials},c.a.t("login.btn-cancel")):""}}])&&h(e.prototype,t),o}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=N(e);return a=this,!(r=t?(n=N(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==v(r)&&"function"!=typeof r?S(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,currentUser:e.currentUser,client:e.client,scope:e.scope,show:e.show,infoSomeScopeUnavailable:e.infoSomeScopeUnavailable},t.handleToggleGrantScope=t.handleToggleGrantScope.bind(S(t)),t.handleGrantScope=t.handleGrantScope.bind(S(t)),f.a.subscribe("GrantScope",(function(e){})),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,currentUser:e.currentUser,client:e.client,scope:e.scope,show:e.show,infoSomeScopeUnavailable:e.infoSomeScopeUnavailable})}},{key:"handleToggleGrantScope",value:function(e){var t=this.state.scope;t.forEach((function(t){t.name===e.name&&(t.granted=!t.granted)})),this.setState({scope:t})}},{key:"handleGrantScope",value:function(){var e=[];this.state.scope.forEach((function(t){t.granted&&e.push(t.name)})),u.a.glewlwydRequest("/auth/grant/"+encodeURIComponent(this.state.client.client_id),"PUT",{scope:e.join(" ")}).then((function(){f.a.sendMessage("App",{type:"GrantComplete"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-set-grant")})}))}},{key:"render",value:function(){var e,t=this,n=[];return this.state.scope.forEach((function(e,a){"openid"===e.name?n.push(r.a.createElement("li",{className:"list-group-item",key:a},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",checked:!0,disabled:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"grant-"+e.name},e.display_name)))):n.push(r.a.createElement("li",{className:"list-group-item",key:a},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:function(){return t.handleToggleGrantScope(e)},id:"grant-"+e.name,checked:e.granted}),r.a.createElement("label",{className:"form-check-label",htmlFor:"grant-"+e.name},e.display_name))))})),this.state.infoSomeScopeUnavailable&&(e=r.a.createElement("div",{className:"alert alert-info",role:"alert"},c.a.t("login.info-some-scope-unavailable"))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h5",null,c.a.t("login.grant-title",{client:this.state.client.name})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("ul",{className:"list-group"},n))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},e)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleGrantScope},c.a.t("login.grant")))),r.a.createElement("hr",{className:"glwd-hr-no-border"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("b",null,c.a.t("login.grant-info-message")))))}}])&&w(e.prototype,t),o}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=P(e);return a=this,!(r=t?(n=P(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==k(r)&&"function"!=typeof r?U(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,triggerResult:!1,mockValue:""},t.triggerScheme=t.triggerScheme.bind(U(t)),t.validateMockValue=t.validateMockValue.bind(U(t)),t.handleChangeMockValue=t.handleChangeMockValue.bind(U(t)),t.triggerScheme(),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser,triggerResult:!1,mockValue:""},(function(){t.triggerScheme()}))}},{key:"triggerScheme",value:function(){var e,t=this;this.state.scheme&&this.state.currentUser&&(e={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{description:"This is a mock trigger"}},u.a.glewlwydRequest("/auth/scheme/trigger/","POST",e,!0).then((function(e){t.setState({triggerResult:e.code})})).fail((function(e){401===e.status?f.a.sendMessage("Notification",{type:"info",message:c.a.t("login.mock-trigger-must-register")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-mock-trigger")})})))}},{key:"handleChangeMockValue",value:function(e){this.setState({mockValue:e.target.value})}},{key:"validateMockValue",value:function(e){e.preventDefault();var t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{code:this.state.mockValue}};u.a.glewlwydRequest("/auth/","POST",t).then((function(){f.a.sendMessage("App",{type:"loginSuccess",loginSuccess:!0})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-mock-value")})}))}},{key:"render",value:function(){var e=this;return this.state.triggerResult?r.a.createElement("form",{action:"#",id:"mockSchemeForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.enter-mock-scheme-value"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"mockValue"},c.a.t("login.mock-value-label"))),r.a.createElement("input",{type:"text",className:"form-control",name:"mockValue",id:"mockValue",autoFocus:!0,required:"",placeholder:c.a.t("login.error-mock-expected",{value:this.state.triggerResult}),value:this.state.mockValue||"",onChange:this.handleChangeMockValue,autoComplete:"false"}))),r.a.createElement("button",{type:"submit",name:"mockbut",id:"mockbut",className:"btn btn-primary",onClick:function(t){return e.validateMockValue(t)},title:c.a.t("login.mock-value-button-title")},c.a.t("login.btn-ok"))):r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.triggerScheme},c.a.t("login.btn-reload"))}}])&&O(e.prototype,t),o}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=T(e);return a=this,!(r=t?(n=T(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==j(r)&&"function"!=typeof r?A(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,code:"",showValidate:!1},t.triggerScheme=t.triggerScheme.bind(A(t)),t.validateCode=t.validateCode.bind(A(t)),t.handleChangeCode=t.handleChangeCode.bind(A(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser,code:"",showValidate:!1})}},{key:"triggerScheme",value:function(e){var t,n=this;e.preventDefault(),this.state.scheme&&this.state.currentUser&&(t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{}},u.a.glewlwydRequest("/auth/scheme/trigger/","POST",t).then((function(e){f.a.sendMessage("Notification",{type:"info",message:c.a.t("login.mail-trigger-ok")}),n.setState({showValidate:!0})})).fail((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.mail-trigger-error")})})))}},{key:"handleChangeCode",value:function(e){this.setState({code:e.target.value})}},{key:"validateCode",value:function(e){e.preventDefault();var t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{code:this.state.code}};u.a.glewlwydRequest("/auth/","POST",t,!0).then((function(){f.a.sendMessage("App",{type:"loginSuccess"})})).fail((function(e){401===e.status?f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.mail-code-invalid")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.mail-code-error")})}))}},{key:"render",value:function(){var e,t,n=this;return this.state.showValidate&&(e=r.a.createElement("button",{type:"submit",name:"mailbut",id:"mailbut",className:"btn btn-primary",onClick:function(e){return n.validateCode(e)},title:c.a.t("login.mail-code-button-title")},c.a.t("login.btn-ok")),t=r.a.createElement("input",{type:"text",className:"form-control",name:"code",id:"code",autoFocus:!0,required:"",placeholder:c.a.t("login.mail-code-ph"),value:this.state.code||"",onChange:this.handleChangeCode,autoComplete:"false"})),r.a.createElement("form",{action:"#",id:"mailSchemeForm",onSubmit:function(e){return n.validateCode(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.mail-enter-scheme-code"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"code"},c.a.t("login.mail-code-label"))),t)),r.a.createElement("div",{className:"btn-group",role:"group"},e,r.a.createElement("button",{type:"button",name:"triggerbut",id:"triggerbut",className:"btn btn-primary",onClick:this.triggerScheme,title:c.a.t("login.mail-trigger-button-title")},c.a.t("login.mail-scheme-trigger"))))}}])&&x(e.prototype,t),o}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=I(e);return a=this,!(r=t?(n=I(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==G(r)&&"function"!=typeof r?V(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,canLogin:!1,webauthnEnabled:!!window.PublicKeyCredential},t.triggerScheme=t.triggerScheme.bind(V(t)),t.login=t.login.bind(V(t)),t.triggerScheme(),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser},(function(){t.triggerScheme()}))}},{key:"strToBin",value:function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}},{key:"binToStr",value:function(e){return btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))}},{key:"login",value:function(){var e=this;u.a.glewlwydRequest("/auth/scheme/trigger/","POST",{username:this.state.currentUser.username,scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,value:{}}).then((function(t){var n=[];t.allowCredentials.forEach((function(t){n.push({id:e.strToBin(t.credential_id),type:"public-key"})}));var a={allowCredentials:n,challenge:e.strToBin(t.challenge)};navigator.credentials.get({publicKey:a}).then((function(n){var a={};"id"in n&&(a.id=n.id),"type"in n&&(a.type=n.type),"rawId"in n&&(a.rawId=e.binToStr(n.rawId)),a.response={clientDataJSON:e.binToStr(n.response.clientDataJSON),authenticatorData:e.binToStr(n.response.authenticatorData),signature:e.binToStr(n.response.signature),userHandle:e.binToStr(n.response.userHandle)},n.response.getTransports&&(response.transports=n.response.getTransports()),u.a.glewlwydRequest("/auth/","POST",{username:e.state.currentUser.username,scheme_type:e.state.scheme.scheme_type,scheme_name:e.state.scheme.scheme_name,value:{session:t.session,credential:a}}).then((function(){f.a.sendMessage("App",{type:"loginSuccess"}),f.a.sendMessage("Notification",{type:"info",message:c.a.t("profile.scheme-webauthn-assertion-success")})})).fail((function(e){401===e.status?f.a.sendMessage("Notification",{type:"danger",message:c.a.t("profile.scheme-webauthn-assertion-error")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})}))})).catch((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("profile.scheme-webauthn-error-assertion")})}))})).fail((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})}))}},{key:"triggerScheme",value:function(){var e,t=this;this.state.scheme&&this.state.currentUser&&(e={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{}},u.a.glewlwydRequest("/auth/scheme/trigger/","POST",e).then((function(e){t.setState({canLogin:!0})})).fail((function(e){t.setState({canLogin:!1},(function(){401===e.status?f.a.sendMessage("Notification",{type:"info",message:c.a.t("login.webauthn-trigger-must-register")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.webauthn-error-trigger")})}))})))}},{key:"render",value:function(){var e,t=this;return this.state.webauthnEnabled||(e=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c.a.t("profile.scheme-webauthn-disabled"))))),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.webauthn-login-title"))),r.a.createElement("div",{className:"form-group"},e),r.a.createElement("button",{type:"button",name:"loginBut",id:"loginBut",disabled:!this.state.canLogin||!this.state.webauthnEnabled,className:"btn btn-primary",onClick:function(e){return t.login(e)},title:c.a.t("login.webauthn-login-button-title")},c.a.t("login.webauthn-login-authenticate")))}}])&&D(e.prototype,t),o}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=H(e);return a=this,!(r=t?(n=H(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==W(r)&&"function"!=typeof r?z(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,value:""},t.validateOTPValue=t.validateOTPValue.bind(z(t)),t.handleChangeOTPValue=t.handleChangeOTPValue.bind(z(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser})}},{key:"handleChangeOTPValue",value:function(e){this.setState({value:e.target.value})}},{key:"validateOTPValue",value:function(e){e.preventDefault();var t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{value:this.state.value}};u.a.glewlwydRequest("/auth/","POST",t).then((function(){f.a.sendMessage("Notification",{type:"info",message:c.a.t("login.success-login")}),f.a.sendMessage("App",{type:"loginSuccess"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{action:"#",id:"otpSchemeForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.otp-enter-value"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"value"},c.a.t("login.otp-value-label"))),r.a.createElement("input",{type:"text",className:"form-control",name:"value",id:"value",required:"",placeholder:c.a.t("login.error-value-expected",{value:this.state.triggerResult}),value:this.state.value||"",onChange:this.handleChangeOTPValue,autoFocus:!0,autoComplete:"false"}))),r.a.createElement("button",{type:"submit",name:"but",id:"but",className:"btn btn-primary",onClick:function(t){return e.validateOTPValue(t)},title:c.a.t("login.otp-button-title")},c.a.t("login.btn-ok")))}}])&&B(e.prototype,t),o}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=ee(e);return a=this,!(r=t?(n=ee(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==Q(r)&&"function"!=typeof r?Z(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,value:""},t.validatePasswordValue=t.validatePasswordValue.bind(Z(t)),t.handleChangePasswordValue=t.handleChangePasswordValue.bind(Z(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser})}},{key:"handleChangePasswordValue",value:function(e){this.setState({value:e.target.value})}},{key:"validatePasswordValue",value:function(e){e.preventDefault();var t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{password:this.state.value}};u.a.glewlwydRequest("/auth/","POST",t).then((function(){f.a.sendMessage("Notification",{type:"info",message:c.a.t("login.success-login")}),f.a.sendMessage("App",{type:"loginSuccess"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{action:"#",id:"otpSchemeForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.password-enter-value"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"value"},c.a.t("login.password-value-label"))),r.a.createElement("input",{type:"password",className:"form-control",name:"value",id:"value",required:"",placeholder:c.a.t("login.error-value-expected",{value:this.state.triggerResult}),value:this.state.value||"",onChange:this.handleChangePasswordValue,autoFocus:!0}))),r.a.createElement("button",{type:"submit",name:"but",id:"but",className:"btn btn-primary",onClick:function(t){return e.validatePasswordValue(t)},title:c.a.t("login.password-button-title")},c.a.t("login.btn-ok")))}}])&&Y(e.prototype,t),o}();function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=se(e);return a=this,!(r=t?(n=se(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==ne(r)&&"function"!=typeof r?oe(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,authResult:!1,authValidated:!1},t.validateCertificate=t.validateCertificate.bind(oe(t)),t}return e=o,(t=[{key:"validateCertificate",value:function(){var e,t=this;this.state.authResult||(e={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{}},u.a.glewlwydRequest("/auth/","POST",e).then((function(){t.setState({authResult:!0,authValidated:!0},(function(){f.a.sendMessage("App",{type:"loginSuccess",loginSuccess:!0})}))})).fail((function(){t.setState({authResult:!1,authValidated:!0})})))}},{key:"render",value:function(){var e,t,n=this;return!0===this.state.authResult?e=r.a.createElement("div",{className:"alert alert-success",role:"alert"},c.a.t("login.certificate-scheme-auth-success")):!1===this.state.authResult&&(this.state.authValidated&&(t=r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c.a.t("login.certificate-scheme-auth-invalid"))),e=r.a.createElement("div",null,t,r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return n.validateCertificate()}},c.a.t("login.certificate-login-authenticate")))),r.a.createElement("form",{action:"#",id:"certificateSchemeForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.certificate-scheme-title"))),r.a.createElement("div",{className:"form-group"},e))}}])&&ae(e.prototype,t),o}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=fe(e);return a=this,!(r=t?(n=fe(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==ie(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser,providerList:[]},t.getProviderList(),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser},(function(){t.getProviderList()}))}},{key:"getProviderList",value:function(){var e,t=this;this.state.scheme&&this.state.currentUser&&(e={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{provider_list:!0}},u.a.glewlwydRequest("/auth/scheme/trigger/","POST",e,!0).then((function(e){t.setState({providerList:e})})).fail((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})})))}},{key:"connectProvider",value:function(e){var t;this.state.scheme&&this.state.currentUser&&(t={scheme_type:this.state.scheme.scheme_type,scheme_name:this.state.scheme.scheme_name,username:this.state.currentUser.username,value:{provider:e,callback_url:window.location.href}},u.a.glewlwydRequest("/auth/scheme/trigger/","POST",t,!0).then((function(e){document.location.href=e.redirect_to})).fail((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})})))}},{key:"render",value:function(){var e=this,t=[];return this.state.providerList.forEach((function(n,a){var o;n.logo_uri?o=r.a.createElement("img",{src:n.logo_uri,alt:n.provider,className:"img-fluid logo-img"}):n.logo_fa&&(o=r.a.createElement("i",{className:n.logo_fa})),t.push(r.a.createElement("div",{key:a},r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return e.connectProvider(n.provider)}},o,r.a.createElement("span",{className:"btn-icon-right"},c.a.t("login.oauth2-connect",{provider:n.provider}))))))})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("h5",null,c.a.t("login.oauth2-title"))),r.a.createElement("div",{className:"form-group"},t))}}])&&le(e.prototype,t),o}();function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=ge(e);return a=this,!(r=t?(n=ge(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==pe(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,currentUser:e.currentUser},t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,scheme:e.scheme,currentUser:e.currentUser})}},{key:"render",value:function(){return"mock"===this.state.scheme.scheme_type?r.a.createElement(R,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"email"===this.state.scheme.scheme_type?r.a.createElement(M,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"webauthn"===this.state.scheme.scheme_type?r.a.createElement(F,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"otp"===this.state.scheme.scheme_type?r.a.createElement(K,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"retype-password"===this.state.scheme.scheme_type||"http"===this.state.scheme.scheme_type?r.a.createElement(te,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"certificate"===this.state.scheme.scheme_type?r.a.createElement(ce,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):"oauth2"===this.state.scheme.scheme_type?r.a.createElement(me,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}):""}}])&&he(e.prototype,t),o}();function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=Se(e);return a=this,!(r=t?(n=Se(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==be(r)&&"function"!=typeof r?Ee(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,scheme:e.scheme,schemeListRequired:e.schemeListRequired,client:e.client,currentUser:e.currentUser,canContinue:!e.scheme,show:e.show},t.handleSelectScheme=t.handleSelectScheme.bind(Ee(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,scheme:e.scheme,schemeListRequired:e.schemeListRequired,client:e.client,currentUser:e.currentUser,canContinue:!e.scheme,show:e.show})}},{key:"handleSelectScheme",value:function(e,t){e.preventDefault(),this.setState({scheme:t})}},{key:"render",value:function(){var e=this;if(this.state.canContinue){var t=this.state.client?c.a.t("login.connect-to",{client:this.state.client.name||this.state.client.client_id}):c.a.t("login.connection");return r.a.createElement("div",null,r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-12 "},r.a.createElement("h3",null,t))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.wish-message")))))}var n="",a="",o=[];return this.state.scheme&&(n=r.a.createElement(ye,{config:this.state.config,scheme:this.state.scheme,currentUser:this.state.currentUser}),a=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null)))),this.state.schemeListRequired&&this.state.schemeListRequired.forEach((function(t,n){o.push(r.a.createElement("a",{className:"dropdown-item",key:n,href:"#",onClick:function(n){return e.handleSelectScheme(n,t)}},t.scheme_display_name))})),r.a.createElement("div",null,n,a,r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button",id:"selectScheme","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-user-lock btn-icon"}),c.a.t("login.login-choose-scheme")),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"selectScheme"},o)))}}])&&ve(e.prototype,t),o}();function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=Ce(e);return a=this,!(r=t?(n=Ce(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==_e(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,currentUser:e.currentUser,client:e.client,scope:e.scope,scheme:e.scheme,schemeListRequired:e.schemeListRequired,showGrant:e.showGrant,infoSomeScopeUnavailable:e.infoSomeScopeUnavailable,validLogin:e.validLogin},t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,currentUser:e.currentUser,client:e.client,scope:e.scope,scheme:e.scheme,schemeListRequired:e.schemeListRequired,showGrant:e.showGrant,infoSomeScopeUnavailable:e.infoSomeScopeUnavailable,validLogin:e.validLogin})}},{key:"render",value:function(){var e,t=this.state.showGrant?r.a.createElement("div",{id:"carouselBody",className:"carousel slide","data-ride":"carousel"},r.a.createElement("div",{className:"carousel-inner"},r.a.createElement("div",{className:"carousel-item"+(this.state.showGrant?" active":"")},r.a.createElement(_,{config:this.state.config,currentUser:this.state.currentUser,client:this.state.client,scope:this.state.scope,infoSomeScopeUnavailable:this.state.infoSomeScopeUnavailable})))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Ne,{config:this.state.config,currentUser:this.state.currentUser,scheme:this.state.scheme,schemeListRequired:this.state.schemeListRequired,client:this.state.client}))),n=this.state.config.profilePicture&&this.state.currentUser[this.state.config.profilePicture.property]?(e=this.state.currentUser[this.state.config.profilePicture.property],Array.isArray(e)&&(e=e[0]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("img",{className:"btn-icon-right img-medium",src:"data:"+this.state.config.profilePicture.type+";base64,"+e,alt:this.state.config.profilePicture.property})))):r.a.createElement("div",{className:"glwd-profile-user-picto-large"},r.a.createElement("i",{className:"fas fa-user"}));return this.state.validLogin?r.a.createElement("div",null,n,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h4",null,c.a.t("login.hello",{name:this.state.currentUser.name||this.state.currentUser.username})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null))),t):r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h3",null,c.a.t("login.error-invalid-url-parameters")))))}}])&&ke(e.prototype,t),o}();function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=Le(e);return a=this,!(r=t?(n=Le(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==Pe(r)&&"function"!=typeof r?xe(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={username:e.username,password:"",config:e.config,currentUser:e.currentUser,userList:e.userList},t.handleChangeUsername=t.handleChangeUsername.bind(xe(t)),t.handleChangePassword=t.handleChangePassword.bind(xe(t)),t.validateLogin=t.validateLogin.bind(xe(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({username:e.username,password:"",config:e.config,currentUser:e.currentUser,userList:e.userList})}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"validateLogin",value:function(e){var t;e.preventDefault(),this.state.username&&this.state.password&&(t={username:this.state.username,password:this.state.password},u.a.glewlwydRequest("/auth/","POST",t).then((function(){f.a.sendMessage("App",{type:"loginSuccess"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})})))}},{key:"gotoManageUsers",value:function(){f.a.sendMessage("App",{type:"SelectAccount"})}},{key:"render",value:function(){var e,t=this,n=this.state.currentUser?r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"username",disabled:!0,value:this.state.currentUser.username}):r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"username",required:"",placeholder:c.a.t("login.login-placeholder"),value:this.state.username,onChange:this.handleChangeUsername,autoFocus:!0});return 0<this.state.userList.length&&(e=r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.gotoManageUsers},c.a.t("login.manage-users"))),r.a.createElement("form",{action:"#",id:"passwordForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h4",null,c.a.t("login.enter-login-password"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"username"},c.a.t("login.login"))),n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"password"},c.a.t("login.password"))),r.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"password",required:"",placeholder:c.a.t("login.password-placeholder"),value:this.state.password,onChange:this.handleChangePassword,autoFocus:!!this.state.currentUser}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("button",{type:"submit",name:"loginbut",id:"loginbut",className:"btn btn-primary btn-lg btn-block",onClick:function(e){return t.validateLogin(e)},title:c.a.t("login.sign-in-title")},c.a.t("login.btn-ok"))),r.a.createElement("div",{className:"col-md-9 text-right mt-2"},e)))}}])&&Re(e.prototype,t),o}();function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=qe(e);return a=this,!(r=t?(n=qe(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==Te(r)&&"function"!=typeof r?De(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,username:e.username,usernameValidated:!1,scheme:e.scheme,userList:e.userList},t.handleChangeUsername=t.handleChangeUsername.bind(De(t)),t.validateUsername=t.validateUsername.bind(De(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,username:e.username,scheme:e.scheme,userList:e.userList})}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"validateUsername",value:function(e){e.preventDefault(),this.state.username&&this.setState({usernameValidated:!0})}},{key:"gotoManageUsers",value:function(){f.a.sendMessage("App",{type:"SelectAccount"})}},{key:"render",value:function(){var e,t,n,a=this;if(0<this.state.userList.length&&(e=r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.gotoManageUsers},c.a.t("login.manage-users"))),this.state.usernameValidated){var o=!1;return this.state.config.sessionSchemes.forEach((function(e){e.scheme_name===a.state.scheme&&(o="mock"===e.scheme_type?r.a.createElement(R,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"email"===e.scheme_type?r.a.createElement(M,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"webauthn"===e.scheme_type?r.a.createElement(F,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"otp"===e.scheme_type?r.a.createElement(K,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"retype-password"===e.scheme_type||"http"===e.scheme_type?r.a.createElement(te,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"certificate"===e.scheme_type?r.a.createElement(ce,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):"oauth2"===e.scheme_type?r.a.createElement(me,{config:a.state.config,scheme:e,currentUser:{username:a.state.username}}):r.a.createElement("div",null,"No can do"))})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("h4",null,c.a.t("login.welcome-login",{username:this.state.username}))),r.a.createElement("div",{className:"form-group"},o),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-right mt-2"},e))))}return r.a.createElement("form",{action:"#",id:"passwordForm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h4",null,c.a.t("login.enter-login"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"username"},c.a.t("login.login"))),r.a.createElement("input",(!0,(n="autoFocus")in(t={type:"text",className:"form-control",name:"username",id:"username",autoFocus:!0,required:"",placeholder:c.a.t("login.login-placeholder"),value:this.state.username,onChange:this.handleChangeUsername})?Object.defineProperty(t,n,{value:!0,enumerable:!0,configurable:!0,writable:!0}):t[n]=!0,t)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("button",{type:"submit",name:"usernamebut",id:"usernamebut",className:"btn btn-primary btn-lg btn-block",onClick:function(e){return a.validateUsername(e)},title:c.a.t("login.sign-in-title")},c.a.t("login.btn-ok"))),r.a.createElement("div",{className:"col-md-9 text-right mt-2"},e)))}}])&&Me(e.prototype,t),o}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=Je(e);return a=this,!(r=t?(n=Je(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==Ie(r)&&"function"!=typeof r?Be(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,userList:e.userList||[],currentUser:e.currentUser||[]},t.handleBack=t.handleBack.bind(Be(t)),t.handleToggleGrantScope=t.handleToggleGrantScope.bind(Be(t)),t.handleNewAccount=t.handleNewAccount.bind(Be(t)),t.handleLogoutAccount=t.handleLogoutAccount.bind(Be(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,userList:e.userList||[],currentUser:e.currentUser||[]})}},{key:"handleBack",value:function(){f.a.sendMessage("App",{type:"SelectAccountComplete"})}},{key:"handleToggleGrantScope",value:function(e){var t=this;this.setState({currentUser:e},(function(){return u.a.glewlwydRequest("/auth/","POST",{username:t.state.currentUser.username}).then((function(){f.a.sendMessage("Notification",{type:"success",message:c.a.t("login.select-login",{username:t.state.currentUser.username})})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})}))}))}},{key:"handleNewAccount",value:function(){f.a.sendMessage("App",{type:"NewUser"})}},{key:"handleLogoutAccount",value:function(e){u.a.glewlwydRequest("/auth/?username="+e,"DELETE").then((function(){f.a.sendMessage("App",{type:"InitProfile"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})}))}},{key:"handleLogoutAll",value:function(){u.a.glewlwydRequest("/auth/","DELETE").then((function(){f.a.sendMessage("App",{type:"SessionClosed"})})).fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-login")})}))}},{key:"render",value:function(){var e,t=this,n=[],a=-1;return this.state.userList.forEach((function(e,n){e.username===t.state.currentUser.username&&(a=n)})),this.state.userList.forEach((function(o,s){var i,l;e=o.picture?(l=o.picture,r.a.createElement("img",{className:"img-thumb glwd-select-user-picture",src:"data:*;base64,"+l})):r.a.createElement("i",{className:"fas fa-user glwd-select-user-picto"}),i=r.a.createElement("div",{className:"input-group",id:"select-user-"+o.username},r.a.createElement("label",{className:"glwd-select-user-label"},r.a.createElement("div",{className:"col input-group-prepend glwd-select-user-col"},e),r.a.createElement("input",{type:"radio",className:"input-hidden",onChange:function(){return t.handleToggleGrantScope(o)},name:"select-user"}),r.a.createElement("div",{className:"col input-group-append glwd-select-user-username"},r.a.createElement("div",{className:"col btn-icon-left glwd-select-user-username v-align-middle"},o.name||o.username),r.a.createElement("button",{type:"button",disabled:!0,className:"glwd-select-user-hidden-button"},r.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg=="}))))),n.push(r.a.createElement("li",{className:"list-group-item"+(a===s?" active":""),key:s},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col glwd-no-padding-right"},i),r.a.createElement("div",{className:"col-auto text-right glwd-no-padding-left"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return t.handleLogoutAccount(o.username)}},c.a.t("login.logout"))))))})),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.select-acount-title")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("ul",{className:"list-group"},n))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleBack},c.a.t("login.back")),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleNewAccount},c.a.t("login.login-another-new")))),r.a.createElement("div",{className:"col-md-6 text-right"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleLogoutAll},c.a.t("login.logout-all")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null))))}}])&&Fe(e.prototype,t),o}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=Ye(e);return a=this,!(r=t?(n=Ye(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==$e(r)&&"function"!=typeof r?Qe(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,userList:e.userList||[],currentUser:e.currentUser||[]},t.handleLogout=t.handleLogout.bind(Qe(t)),t.handleIgnoreLogout=t.handleIgnoreLogout.bind(Qe(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,userList:e.userList||[],currentUser:e.currentUser||[]})}},{key:"handleLogout",value:function(){var e=this;u.a.glewlwydRequest("/auth/","DELETE").fail((function(){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.error-delete-session")})})).always((function(){e.state.config.params.callback_url?document.location.href=e.state.config.params.callback_url:f.a.sendMessage("App",{type:"SessionClosed"})}))}},{key:"handleIgnoreLogout",value:function(){document.location.href=this.state.config.params.callback_url}},{key:"render",value:function(){var e;return this.state.config.params.callback_url&&(e=r.a.createElement("button",{type:"button",className:"btn btn-primary btn-icon-right",onClick:this.handleIgnoreLogout},c.a.t("login.ignore-logout"))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,c.a.t("login.end-session-title")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.end-session-message")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-icon",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt btn-icon"}),c.a.t("login.logout")),e)))}}])&&He(e.prototype,t),o}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=nt(e);return a=this,!(r=t?(n=nt(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==Ze(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config},t}return e=o,(t=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h3",null,c.a.t("login.session-closed-title")))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h4",null,c.a.t("login.session-closed-message")))))}}])&&et(e.prototype,t),o}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=it(e);return a=this,!(r=t?(n=it(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==rt(r)&&"function"!=typeof r?ct(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,userCode:""},t.handleValidCode=t.handleValidCode.bind(ct(t)),t.handleChangeUserCode=t.handleChangeUserCode.bind(ct(t)),t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,userCode:""})}},{key:"handleChangeUserCode",value:function(e){var t=e.target.value.replace(/[\W\s\._\-]+/g,"").toUpperCase();8<t.length&&(t=t.substring(0,8)),4<=t.length&&(t=t.substring(0,4)+"-"+t.substring(4)),this.setState({userCode:t})}},{key:"handleValidCode",value:function(){document.location=this.state.config.params.callback_url+"?code="+this.state.userCode}},{key:"render",value:function(){var e,t;return"deviceComplete"===this.state.config.params.prompt?e=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.device-authorization-complete-message")))):"deviceServerError"===this.state.config.params.prompt?e=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.device-authorization-server-error-message")))):(e="deviceCodeError"===this.state.config.params.prompt?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.device-authorization-message"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"username"},c.a.t("login.device-auth-user-code"))),r.a.createElement("input",{type:"text",maxLength:"9",placeholder:c.a.t("login.device-auth-user-code-ph"),value:this.state.userCode,onChange:this.handleChangeUserCode})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.device-authorization-code-error-message"))))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",null,c.a.t("login.device-authorization-message"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"username"},c.a.t("login.device-auth-user-code"))),r.a.createElement("input",{type:"text",maxLength:"9",placeholder:c.a.t("login.device-auth-user-code-ph"),value:this.state.userCode,onChange:this.handleChangeUserCode})))),t=r.a.createElement("button",{type:"button",className:"btn btn-primary btn-icon",onClick:this.handleValidCode,disabled:this.state.userCode.length<9},r.a.createElement("i",{className:"fas fa-sign-out-alt btn-icon"}),c.a.t("login.btn-ok"))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,c.a.t("login.device-authorization-title")))),r.a.createElement("hr",null),e,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},t)))}}])&&ot(e.prototype,t),o}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=pt(e);return a=this,!(r=t?(n=pt(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==ut(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={config:e.config,resetCredentials:e.resetCredentials,username:{},code:{}},t}return e=o,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,resetCredentials:e.resetCredentials})}},{key:"sendEmail",value:function(e,t){return e.preventDefault(),u.a.glewlwydRequest("/"+t.name+"/reset-credentials-email","POST",{username:this.state.username["email-"+t.name],callback_url:encodeURIComponent(document.location.href)}).then((function(){f.a.sendMessage("App",{type:"message",title:c.a.t("login.reset-credentials-title"),label:c.a.t("login.reset-credentials-email-message-label")})})).fail((function(e){f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})})),!1}},{key:"sendCode",value:function(e,t){var n=this;return e.preventDefault(),u.a.glewlwydRequest("/"+t.name+"/reset-credentials-code","POST",{username:this.state.username["code-"+t.name],code:this.state.code[t.name]}).then((function(){document.location.href=n.state.config.ProfileUrl+"?resetCredentials="+t.name+"&callback_url="+encodeURIComponent(document.location.href)})).fail((function(e){403==e.status?f.a.sendMessage("Notification",{type:"danger",message:c.a.t("login.reset-credentials-code-invalid")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})})),!1}},{key:"changeUsername",value:function(e,t,n){var a=this.state.username;a[(n?"email-":"code-")+t]=e.target.value,this.setState({username:a})}},{key:"changeCode",value:function(e,t){var n=this.state.code;n[t]=e.target.value,this.setState({code:n})}},{key:"render",value:function(){var e=this,t=[],n=[];return this.state.resetCredentials.forEach((function(a,o){a.code&&(n.length&&n.push(r.a.createElement("div",{className:"col-12 col-md-4 text-center",key:n.length},r.a.createElement("h4",null,c.a.t("admin.or")))),n.push(r.a.createElement("div",{className:"col-12 col-md-4 card",key:n.length},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.a.t("login.reset-credentials-code-title")),r.a.createElement("form",{noValidate:!0,onSubmit:function(t){return e.sendCode(t,a)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},c.a.t("login.login")),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"username",value:e.state.username["code-"+a.name]||"",onChange:function(t){return e.changeUsername(t,a.name,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"code"},c.a.t("login.reset-credentials-code-label")),r.a.createElement("input",{type:"text",className:"form-control",name:"code",id:"code",value:e.state.code[a.name]||"",onChange:function(t){return e.changeCode(t,a.name)}})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!e.state.username["code-"+a.name]||!e.state.code[a.name]},c.a.t("login.reset-credentials-code-button"))))))),a.email&&((n.length||t.length)&&t.push(r.a.createElement("div",{className:"col-12 col-md-4 text-center",key:n.length+t.length},r.a.createElement("h4",null,c.a.t("admin.or")))),t.push(r.a.createElement("div",{className:"col-12 col-md-4 card",key:n.length+t.length},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.a.t("login.reset-credentials-email-title")),r.a.createElement("form",{noValidate:!0,onSubmit:function(t){return e.sendEmail(t,a)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},c.a.t("login.login")),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"username",value:e.state.username["email-"+a.name]||"",onChange:function(t){return e.changeUsername(t,a.name,!0)}})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!e.state.username["email-"+a.name]},c.a.t("login.reset-credentials-email-button")))))))})),r.a.createElement("div",null,r.a.createElement("h3",null,c.a.t("login.reset-credentials-title")),r.a.createElement("hr",null),r.a.createElement("div",{className:"row d-flex justify-content-around"},n,t))}}])&&ft(e.prototype,t),o}(),dt=n(13);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var St=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(o,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=wt(e);return a=this,!(r=t?(n=wt(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==gt(r)&&"function"!=typeof r?vt(a):r}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={newUser:!1,userList:[],currentUser:!1,config:e.config,loaded:!1,lang:c.a.language,scope:[],mustRegisterScheme:!1,scheme:e.config.params.scheme,schemeListRequired:!1,passwordRequired:!1,client:!1,showGrant:!0,showGrantAsterisk:!1,canContinue:!1,prompt:e.config.params.prompt,refresh_login:e.config.params.refresh_login,forceShowGrant:!1,selectAccount:!1,endSession:!1,sessionClosed:!1,deviceAuth:!1,login_hint:e.config.params.login_hint||"",errorScopesUnavailable:!1,infoSomeScopeUnavailable:!1,errorScheme:!1,registration:[],resetCredentials:[],resetCredentialsShow:!1,messageModal:{title:"",label:"",message:""}},t.initProfile=t.initProfile.bind(vt(t)),t.checkClientScope=t.checkClientScope.bind(vt(t)),t.checkScopeScheme=t.checkScopeScheme.bind(vt(t)),t.changeLang=t.changeLang.bind(vt(t)),t.parseSchemes=t.parseSchemes.bind(vt(t)),t.state.config&&t.initProfile(!0),f.a.subscribe("App",(function(e){var n;"InitProfile"===e.type?t.initProfile(!1):"loginSuccess"===e.type?t.setState({selectAccount:!1,newUser:!1,refresh_login:!1,prompt:!1,resetCredentialsShow:!1},(function(){t.initProfile(!1)})):"NewUser"===e.type?t.setState({selectAccount:!1,newUser:!0,currentUser:!1,scheme:t.state.config.params.scheme,resetCredentialsShow:!1},(function(){})):"GrantComplete"===e.type?t.setState({selectAccount:!1,showGrant:!1,prompt:!1,forceShowGrant:!1,resetCredentialsShow:!1},(function(){t.initProfile(!1)})):"SelectAccount"===e.type?t.setState({selectAccount:!0,newUser:!1},(function(){t.initProfile(!1)})):"SelectAccountComplete"===e.type?t.setState({selectAccount:!1,prompt:!1},(function(){t.initProfile(!1)})):"ToggleGrant"===e.type?t.setState({showGrant:!t.state.showGrant}):"newUserScheme"===e.type?t.setState({scheme:e.scheme}):"SessionClosed"===e.type?t.setState({endSession:!1,sessionClosed:!0}):"ResetCredentials"===e.type?t.setState({selectAccount:!1,newUser:!1,refresh_login:!1,prompt:!1,resetCredentialsShow:!0}):"message"===e.type&&((n=t.state.messageModal).title=e.title,n.label=e.label,n.message=e.message,t.setState({messageModal:n},(function(){$("#messageModal").modal({keyboard:!1,show:!0})})))})),t}return e=o,(t=[{key:"initProfile",value:function(e){var t,n,a=this;this.state.config.register&&(t=[],n=[],this.state.config.register.forEach((function(e,r){u.a.glewlwydRequest("/"+e.name+"/config").then((function(r){r.registration&&t.push({name:e.name,message:e.message}),(r["reset-credentials"].email||r["reset-credentials"].code)&&n.push({name:e.name,message:e["reset-credentials-message"],email:r["reset-credentials"].email,code:r["reset-credentials"].code}),a.setState({registration:t,resetCredentials:n})})).fail((function(e){a.setState({registerValid:!1,registering:!1},(function(){404===e.status?f.a.sendMessage("Notification",{type:"danger",message:c.a.t("profile.register-invalid-url")}):f.a.sendMessage("Notification",{type:"danger",message:c.a.t("error-api-connect")})}))}))}))),u.a.glewlwydRequest("/profile_list").then((function(t){var n={};t.length&&(n.currentUser=t[0],n.login_hint=t[0].username,n.errorScopesUnavailable=!a.userHasScope(t[0],a.state.config.params.scope)),n.userList=t,n.loaded=!0,e&&("login"===a.state.prompt?(n.currentUser=!1,n.newUser=!0):"consent"===a.state.prompt?n.forceShowGrant=!0:"select_account"===a.state.prompt?n.selectAccount=!0:"end_session"===a.state.prompt?(n.endSession=!0,n.newUser=!1,n.currentUser=!1):a.state.prompt&&"device"===a.state.prompt.substring(0,6)?n.deviceAuth=!0:n.newUser=!1),a.setState(n,(function(){a.state.config.params.client_id&&a.state.config.params.scope?a.checkClientScope(a.state.config.params.client_id,a.state.config.params.scope):a.state.config.params.scope?a.checkScopeScheme(a.state.config.params.scope):a.setState({showGrantAsterisk:!1})}))})).fail((function(e){401!=e.status&&f.a.sendMessage("Notification",{type:"warning",message:c.a.t("error-api-connect")}),"device"===a.state.prompt?a.setState({deviceAuth:!0,currentUser:!1,userList:[],loaded:!0}):a.setState({newUser:!!a.state.config.params.callback_url&&!!a.state.config.params.scope,showGrant:!1,currentUser:!1,userList:[],loaded:!0})}))}},{key:"checkClientScope",value:function(e,t){var n=this;u.a.glewlwydRequest("/auth/grant/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)).then((function(e){var a,r=[],o=!0,s=!1;e.scope.length?(a=t.split(" ").length>e.scope.length,"openid"===t?(o=n.state.forceShowGrant,r.push("openid")):e.scope.forEach((function(e){"openid"===e.name&&(e.granted=!0),e.granted?("openid"!==e.name&&(o=n.state.forceShowGrant),r.push(e.name)):s=!0})),r.length?u.a.glewlwydRequest("/auth/scheme/?scope="+encodeURIComponent(r.join(" "))).then((function(t){n.setState({client:e.client,scope:e.scope,scheme:t,showGrant:o,showGrantAsterisk:s,infoSomeScopeUnavailable:a,errorScopesUnavailable:!1},(function(){n.parseSchemes()}))})).fail((function(e){f.a.sendMessage("Notification",{type:"warning",message:c.a.t("login.error-scheme-scope-api")})})):n.setState({client:e.client,scope:e.scope,showGrant:!0,showGrantAsterisk:!0,errorScopesUnavailable:!1,infoSomeScopeUnavailable:a})):n.setState({errorScopesUnavailable:!0,infoSomeScopeUnavailable:!1})})).fail((function(e){404===e.status?f.a.sendMessage("Notification",{type:"warning",message:c.a.t("login.error-scheme-scope-unavailable")}):f.a.sendMessage("Notification",{type:"warning",message:c.a.t("login.error-grant-api")})}))}},{key:"checkScopeScheme",value:function(e){var t=this;u.a.glewlwydRequest("/auth/scheme/?scope="+e).then((function(e){t.setState({scheme:e,showGrant:!1,showGrantAsterisk:!1},(function(){t.parseSchemes()}))})).fail((function(e){404===e.status?f.a.sendMessage("Notification",{type:"warning",message:c.a.t("login.error-scheme-scope-unavailable")}):f.a.sendMessage("Notification",{type:"warning",message:c.a.t("login.error-scheme-scope-api")})}))}},{key:"parseSchemes",value:function(){var e=!!this.state.config.params.callback_url,t=!1,n=!1,a=!1,r=!1;for(var o in this.state.scheme)if(e){var s=this.state.scheme[o];if(s.available&&s.password_required&&!s.password_authenticated){a=n=!(t=!(e=!1));break}if(!n&&e)for(var c in s.schemes){var i=s.schemes[c],l=!1;n=i;if(i.forEach((function(e){r=!1,e.scheme_authenticated?a=n=!(l=!0):(!a||a.scheme_last_login<e.scheme_last_login)&&e.scheme_registered?a=e:e.scheme_registered||a||(r=!0)})),!l){e=!1;break}}}!t&&this.state.refresh_login&&(t=!0),e&&(a=!1),this.setState({canContinue:e,passwordRequired:t,schemeListRequired:n,scheme:a,errorScheme:!a&&!e,mustRegisterScheme:r})}},{key:"changeLang",value:function(e,t){var n=this;c.a.changeLanguage(t).then((function(){n.setState({lang:t})}))}},{key:"userHasScope",value:function(e,t){var n=!1;return t&&t.split(" ").forEach((function(t){-1<e.scope.indexOf(t)&&(n=!0)})),n}},{key:"render",value:function(){var e=this;if(this.state.config){var t,n,a,o,s="";this.state.loaded&&(this.state.resetCredentialsShow?s=r.a.createElement(ht,{config:this.state.config,resetCredentials:this.state.resetCredentials}):this.state.endSession?s=r.a.createElement(Xe,{config:this.state.config,userList:this.state.userList,currentUser:this.state.currentUser}):this.state.sessionClosed?s=r.a.createElement(at,{config:this.state.config}):this.state.deviceAuth?s=r.a.createElement(lt,{config:this.state.config,userList:this.state.userList,currentUser:this.state.currentUser}):(o=this.state.mustRegisterScheme&&!this.state.errorScopesUnavailable?r.a.createElement("div",{className:"alert alert-warning",role:"alert"},c.a.t("login.warning-not-registered-scheme")):this.state.errorScheme&&!this.state.errorScopesUnavailable?r.a.createElement("div",{className:"alert alert-warning",role:"alert"},c.a.t("login.warning-error-scheme")):(this.state.config.params.callback_url||(n=r.a.createElement("div",{className:"alert alert-warning",role:"alert"},c.a.t("login.warning-no-callback-url"))),this.state.config.params.scope||(a=r.a.createElement("div",{className:"alert alert-warning",role:"alert"},c.a.t("login.warning-no-scope"))),r.a.createElement("div",null,n,a)),this.state.newUser||this.state.passwordRequired?s=this.state.scheme?r.a.createElement(Ve,{config:this.state.config,username:this.state.login_hint,userList:this.state.userList,callbackInitProfile:this.initProfile,scheme:this.state.scheme}):r.a.createElement(Ae,{config:this.state.config,username:this.state.login_hint,currentUser:this.state.currentUser,userList:this.state.userList,callbackInitProfile:this.initProfile}):this.state.selectAccount?s=r.a.createElement(ze,{config:this.state.config,userList:this.state.userList,currentUser:this.state.currentUser}):(s=r.a.createElement(Ue,{config:this.state.config,currentUser:this.state.currentUser,client:this.state.client,scope:this.state.scope,scheme:this.state.scheme,schemeListRequired:this.state.schemeListRequired,showGrant:this.state.showGrant,infoSomeScopeUnavailable:this.state.infoSomeScopeUnavailable,validLogin:!!this.state.config.params.callback_url&&!!this.state.config.params.scope}),this.state.errorScopesUnavailable&&(t=r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c.a.t("login.error-scope-unavailable"))))));var i=[];return this.state.config.lang.forEach((function(t,n){t===c.a.language?i.push(r.a.createElement("a",{className:"dropdown-item active",href:"#",key:n},t)):i.push(r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(n){return e.changeLang(n,t)},key:n},t))})),r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"glwd-container"},r.a.createElement("div",{className:"card center glwd-card",id:"userCard",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"card-header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("a",{className:"navbar-brand",href:"#","data-toggle":"collapse"},r.a.createElement("img",{className:"mr-3",src:"img/logo-login.png",alt:"logo"}),c.a.t("login.menu-title")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownLang","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-language"})),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownLang"},i))))),o,r.a.createElement("div",{className:"card-body"},t,s),r.a.createElement("div",{className:"card-footer"},r.a.createElement(b,{config:this.state.config,currentUser:this.state.currentUser,userList:this.state.userList,client:this.state.client,showGrant:this.state.showGrant,showGrantAsterisk:this.state.showGrantAsterisk,newUser:this.state.newUser,newUserScheme:this.state.scheme,canContinue:this.state.canContinue&&!this.state.errorScopesUnavailable,schemeListRequired:this.state.schemeListRequired,selectAccount:this.state.selectAccount,registration:this.state.registration,resetCredentials:this.state.resetCredentials,resetCredentialsShow:this.state.resetCredentialsShow}))),r.a.createElement(m.a,{loggedIn:!0}),r.a.createElement(dt.a,{title:this.state.messageModal.title,label:this.state.messageModal.label,message:this.state.messageModal.message}))}return r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"glwd-container"},r.a.createElement("div",{className:"card center glwd-card",id:"userCard",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",null,r.a.createElement("span",{className:"badge badge-danger"},c.a.t("error-api-connect"))))))}}])&&yt(e.prototype,t),o}(),Nt=n(8),_t={fallbackLng:"en",ns:["translations"],defaultNS:"translations",backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}};Et("ui_locales")&&(_t.lng=Et("ui_locales").split(" ")[0]);try{c.a.use(i.a).use(l.a).init(_t).then((function(){u.a.request("config.json").then((function(e){e.lang||(e.lang=["en","fr","nl"]),u.a.request(e.GlewlwydUrl+"config/").then((function(t){u.a.setConfig(e.GlewlwydUrl+t.api_prefix);var n=Object.assign({params:{scope:Et("scope")||!1,client_id:Et("client_id")||!1,callback_url:Et("callback_url")||!1,scheme:Et("scheme")||e.defaultScheme||!1,prompt:Et("prompt")||!1,refresh_login:!!Et("refresh_login"),login_hint:Et("login_hint")||!1}},e,t);s.a.render(r.a.createElement(St,{config:n}),document.getElementById("root"))})).fail((function(e){s.a.render(r.a.createElement(St,{config:!1}),document.getElementById("root"))}))})).fail((function(e){s.a.render(r.a.createElement(Nt.a,null),document.getElementById("root"))}))}))}catch(e){$("#root").html('<div class="alert alert-danger" role="alert"><i class="fas fa-exclamation-triangle"></i><span class="btn-icon-right">You must use a browser compatible with Glewlwyd SSO</span></div>')}},3:function(e,t,n){"use strict";var a=n(2);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.GlewlwydApiPrefix="",this.GlewlwydApiPrefixSub=""}var t,n;return t=e,(n=[{key:"setConfig",value:function(e){this.GlewlwydApiPrefix=e}},{key:"getConfig",value:function(){return this.GlewlwydApiPrefix}},{key:"setConfigSub",value:function(e){this.GlewlwydApiPrefixSub=e}},{key:"getConfigSub",value:function(){return this.GlewlwydApiPrefixSub}},{key:"request",value:function(e,t,n){var a=1<arguments.length&&void 0!==t?t:"GET",r=2<arguments.length&&void 0!==n&&n;return r&&"GET"!==a?$.ajax({method:a,url:e,data:JSON.stringify(r),contentType:"application/json; charset=utf-8"}):$.ajax({method:a,url:e})}},{key:"glewlwydRequest",value:function(e,t,n,r){var o=1<arguments.length&&void 0!==t?t:"GET",s=2<arguments.length&&void 0!==n&&n,c=3<arguments.length&&void 0!==r&&r;return this.request(this.GlewlwydApiPrefix+e,o,s).fail((function(e){c&&401===e.status&&a.a.sendMessage("App",{type:"loggedIn",message:!1})}))}},{key:"glewlwydRequestSub",value:function(e,t,n){var a=1<arguments.length&&void 0!==t?t:"GET",r=2<arguments.length&&void 0!==n&&n;return this.request(this.GlewlwydApiPrefixSub+e,a,r)}}])&&r(t.prototype,n),e}());t.a=o},4:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(f,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=u(e);return a=this,!(r=t?(n=u(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==s(r)&&"function"!=typeof r?l(a):r}}(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=n.call(this,e)).state={message:[],counter:0,loggedIn:e.loggedIn},o.a.subscribe("Notification",(function(e){var n;e.type&&((n=t.state.message).push({type:e.type,message:e.message,id:t.state.counter}),t.setState({message:n,counter:t.state.counter+1},(function(){t.timeoutClose(t.state.counter-1)})))})),t.close=t.close.bind(l(t)),t.timeoutClose=t.timeoutClose.bind(l(t)),t}return e=f,(t=[{key:"componentWillReceiveProps",value:function(e){this.setState({loggedIn:e.loggedIn})}},{key:"timeoutClose",value:function(e){var t=this;setTimeout((function(){t.close(e)}),5e3)}},{key:"close",value:function(e){var t=this,n=this.state.message;n.forEach((function(a,r){a.id===e&&(n.splice(r,1),t.setState({message:n}))}))}},{key:"render",value:function(){var e=this,t=[];return this.state.loggedIn&&this.state.message.forEach((function(n,a){var o="success"===n.type?r.a.createElement("strong",{className:"mr-auto"},r.a.createElement("span",{className:"badge badge-success btn-icon"},r.a.createElement("i",{className:"fas fa-check-circle"})),"Glewlwyd"):"danger"===n.type?r.a.createElement("strong",{className:"mr-auto"},r.a.createElement("span",{className:"badge badge-danger btn-icon"},r.a.createElement("i",{className:"fas fa-exclamation-circle"})),"Glewlwyd"):"warning"===n.type?r.a.createElement("strong",{className:"mr-auto"},r.a.createElement("span",{className:"badge badge-warning btn-icon"},r.a.createElement("i",{className:"fas fa-exclamation-circle"})),"Glewlwyd"):r.a.createElement("strong",{className:"mr-auto"},r.a.createElement("span",{className:"badge badge-info btn-icon"},r.a.createElement("i",{className:"fas fa-info-circle"})),"Glewlwyd");t.push(r.a.createElement("div",{className:"toast-container",style:{top:95+90*a,right:5},key:a},r.a.createElement("div",{className:"toast glwd-toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},r.a.createElement("div",{className:"toast-header"},o,r.a.createElement("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:function(){return e.close(n.id)}},r.a.createElement("span",{"aria-hidden":"true"},"Ã—"))),r.a.createElement("div",{className:"toast-body"},n.message))))})),r.a.createElement("div",null,t)}}])&&c(e.prototype,t),f}();t.a=f},8:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,a.Component);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a,r,o=l(e);return a=this,!(r=t?(n=l(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!==s(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(a):r}}(u);function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n.call(this,e)}return e=u,(t=[{key:"render",value:function(){return r.a.createElement("div",{className:"alert alert-danger perfect-centering",role:"alert"},o.a.t("error-config"))}}])&&c(e.prototype,t),u}();t.a=u}})}));